<!-- vim: ft=html tabstop=2 shiftwidth=2 -->
<!DOCTYPE html>
<html>
<head>
  <title>üê¢ FWM Playground</title>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="UTF-8" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
	<link href="https://fonts.googleapis.com/css2?family=Fira+Mono&amp;display=swap" rel="stylesheet">
  <style>
/* stolen from /fmf/ xd */
* { outline: none }
html, body { margin: 0; padding: 0; background: #1b181b; color: #ab9bab; font-family: 'Fira Mono', monospace }
body { margin: auto; padding: 1em; max-width: 52em }
header { margin-top: 4em; user-select: none }
header .oneline { display: flex; justify-content: space-between }
code, pre, textarea { background: #0d0c0d; font-family: inherit }
code { user-select: all; padding: 0 2px; margin: 0 -2px }
.codeblock { position: relative }
.codeblock .prelude { position: absolute; top: 4px; right: 4px; font-style: italic; color: #776977 }
pre { padding: 9px; overflow: auto; min-height: 17px }
textarea { resize: vertical; padding: 9px; box-sizing: border-box; overflow: auto; color: inherit; border: none; width: 100%; min-height: 220px }
a { color: #7b59c0; text-decoration: none }
a:hover { text-decoration: underline dotted }
footer { min-height: 25vh }
ul li { list-style-type: '*  ' }
.split { display: grid; grid-template-columns: 1fr 1fr; gap: 13px }
  </style>
</head>
<body>
  <noscript>
    <center>
      <h1>This app uses WebAssembly but you fucking browser doesn't support even FUCKING JAVASCRIPT</h1>
      <p>
        It seems you are using Opera instead of normal browser. Please install Chromium or Firefox idk.
      </p>
    </center>
  </noscript>
  <header>
    <div class="oneline">
      <span>/fmf/ | FWM Playground</span>
      <span>justaplant.xyz</span>
    </div>
    <hr style="margin-bottom: 1.1em">
  </header>
  <main>
<p>
This playground written in WASM and code compiles locally in you'r browser! 
Also, you can find autogenerated documentation <a href="https:///fmf/docs">here</a>.
</p>
<div id="main"></div>
<h2> Examples</h2>
<p>
Most opcodes follows syntax of destination-first. For example,
<code>mov %r0, %r1</code> copies value from <code>%r1</code> to <code>%r0</code>.
</p>
<p>
Here some basic examples of FWM code:
</p>
<h3> Syntax by example</h3>
<div class="codeblock">
<div class="prelude">lang: fwm, file: syntax.fwm</div>
<pre># Instructions:
halt
mov   %r0, 10          # move 10 to register r0
mov   %r0, $10         # move 10 to register r0
mov   %r0, 10h         # move 16 to register r0
mov   %r0, [2; $C010h] # move 16 to register r0
                       # [len; val] is a raw syntax for arguments
mov   %r0, [label]     # move label value to register r0
jmp   [label]          # jump to label

# Labels and raws
@label # define a lable
@:0    # define a local label
@label # redefine a label
@label2
@:0    # define another local label

@[2; 0001h] # push [0x00, 0x01] to output stream
@[0; 0]     # push nothing to output but increase expression
            # count (used for correct label pointers)

# Defination:
# some defination are built-in, like mov, halt, %r0, etc...
.reg my_register 10h   # define register %my_register with value 0x10
jmp %my_register       # will produce [0x20, 0x00, 0x10]

.op my_opcode 4001h    # define opcode my_opcode with value 0x4001
my_opcode 0            # will produce [0x40, 0x01, 0xC0, 0x00]
# note: writing opcodes with invalid arguments count will trigger
# undefined behavior A.K.A. you may get shit in you'r bytecode
</pre>
<h3> Hello world</h3>
<div class="codeblock">
<div class="prelude">lang: fwm, file: hello.fwm</div>
<pre>xor %r0, %r0

mov [%r0; 0], 104 # h
mov [%r0; 1], 101 # e
mov [%r0; 2], 108 # l
mov [%r0; 3], 108 # l
mov [%r0; 4], 111 # o

write 0, 5 # [STACK POINTER] [LENGTH]
</pre>
  </main>
</body>
</html>
